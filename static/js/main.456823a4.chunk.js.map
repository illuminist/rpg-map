{"version":3,"sources":["theme/makeStyles.ts","components/GameMap/styles.ts","components/ImageLayer/styles.ts","helpers/makeUrl.ts","components/ImageLayer/ImageLayer.tsx","components/ImageLayer/index.ts","components/ObjectLayer/styles.ts","hooks/useAsyncEffect.ts","components/ObjectLayer/ObjectLayer.tsx","components/ObjectLayer/index.ts","components/GameMap/GameMap.tsx","components/GameMap/index.ts","theme/index.ts","App.tsx","serviceWorker.ts","index.tsx","mapdefs/demo1def.yaml","mapdefs/demo2def.yaml"],"names":["makeStyles","styles","options","oriMakeStyles","omit","theme","root","height","width","zoomController","position","layerContainer","top","left","layer","userSelect","controllInstruction","bottom","transform","backgroundColor","color","borderTopRightRadius","shape","borderRadius","borderTopLeftRadius","padding","name","index","makeUrl","url","startsWith","process","ImageLayer","props","classes","useStyles","className","layerId","layerDef","classNames","src","alt","defaultProps","tileSize","mapDef","gridSize","tile","borderStyle","borderColor","borderWidth","walkable","useAsyncEffect","fn","deps","mainRef","React","runningCount","current","selfRef","isCurrent","finally","console","log","ObjectLayer","setWalkable","self","a","img","document","createElement","onload","canvas","ctx","getContext","Error","drawImage","wk","_","times","gridCount","y","x","getImageData","data","key","style","initialCameraState","isMoving","zoom","cameraMoveStart","createAction","cameraZoomRelative","cameraMoveRelative","cameraMoveEnd","cameraReducer","createReducer","builder","addCase","state","action","payload","Math","min","max","MapLayerContainer","layerOrder","map","type","layerComponentRender","layerDefs","GameMap","cameraState","cameraDispatch","handleMouseUp","e","button","handleWheel","deltaY","window","addEventListener","removeEventListener","pp","useSpring","onMouseDown","onMouseMove","movementX","movementY","div","interpolate","flexDirectionCenter","row","justifyContent","column","alignItems","sansFonts","serifFonts","palette","background","primary","amber","secondary","red","mixins","flex","direction","display","flexDirection","includes","flexWrap","imageAvatar","mixBackgroundColor","getContrastText","drawer","main","sidebar","typography","fontSize","fontFamily","h1","h2","h3","h4","h5","h6","createMuiTheme","partialTheme","App","basename","ThemeProvider","CssBaseline","path","map1Def","map2Def","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","module","exports"],"mappings":"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AW,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,Q,iBCAp+DD,EAAOC,QAAU,CAAC,UAAY,CAAC,MAAQ,GAAG,OAAS,IAAI,SAAW,CAAC,MAAQ,GAAG,OAAS,IAAI,WAAa,CAAC,cAAc,gBAAgB,UAAY,CAAC,YAAc,CAAC,KAAO,QAAQ,IAAM,yBAAyB,aAAe,CAAC,KAAO,SAAS,SAAW,CAAC,IAAM,sC","file":"static/js/main.456823a4.chunk.js","sourcesContent":["import omit from 'lodash/omit'\nimport { Theme } from '@material-ui/core/styles/createMuiTheme'\nimport { makeStyles as oriMakeStyles } from '@material-ui/styles'\n\nimport { Styles, WithStylesOptions } from '@material-ui/styles/withStyles'\n\nexport const makeStyles = <\n  Props extends {} = {},\n  ClassKey extends string = string\n>(\n  styles: Styles<Theme, Props, ClassKey>,\n  options?: WithStylesOptions<Theme>,\n) => {\n  return oriMakeStyles(\n    styles,\n    process.env.NODE_ENV === 'production' ? omit(options, 'name') : options,\n  )\n}\nexport default makeStyles\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // position: 'fixed',\n      height: '100vh',\n      width: '100vw',\n    },\n    zoomController: {\n      position: 'absolute',\n      height: '300vh',\n    },\n    layerContainer: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height: '100vh',\n      width: '100vw',\n    },\n    layer: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      userSelect: 'none',\n    },\n    controllInstruction: {\n      position: 'fixed',\n      bottom: 0,\n      left: '50%',\n      transform: 'translateX(-50%)',\n      backgroundColor: 'rgba(0,0,0,0.3)',\n      color: 'white',\n      borderTopRightRadius: theme.shape.borderRadius,\n      borderTopLeftRadius: theme.shape.borderRadius,\n      padding: 16,\n    },\n  }),\n  { name: 'GameMap', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {},\n  }),\n  { name: 'ImageLayer', index: 1 },\n)\n","export const makeUrl = (url: string) => {\n  if (url) {\n    if (url.startsWith('/')) {\n      return process.env.PUBLIC_URL + url\n    }\n  }\n\n  return url\n}\n\nexport default makeUrl\n","import classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport MapType, { ImageLayer as ImageLayerType } from 'maptype'\nimport makeUrl from 'helpers/makeUrl'\n\nexport interface ImageLayerProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  layerId: string\n  layerDef: ImageLayerType\n  mapDef: MapType\n}\n\n\nexport const ImageLayer: React.FC<ImageLayerProps> = (props) => {\n  const classes = useStyles(props)\n  const { className, layerId, layerDef } = props\n\n  return (\n    <div className={classNames(className, classes.root)}>\n      <img src={makeUrl(layerDef.src)} alt={layerId} />\n    </div>\n  )\n}\n\nImageLayer.defaultProps = {}\n\nexport default ImageLayer\n","import ImageLayer from './ImageLayer'\n\nexport default ImageLayer\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\nimport MapType from 'maptype'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n    tileSize: (mapDef: MapType) => ({\n      width: mapDef.gridSize.width,\n      height: mapDef.gridSize.height,\n    }),\n    tile: {\n      backgroundColor: 'rgba(255,0,0,0.3)',\n      position: 'absolute',\n      borderStyle: 'solid',\n      borderColor: 'rgba(255,0,0,0.3)',\n      borderWidth: 1,\n    },\n    walkable: {\n      backgroundColor: 'unset',\n      borderColor: 'rgba(0,255,0,0.1)',\n    },\n  }),\n  { name: 'ObjectLayer', index: 1 },\n)\n","import * as React from 'react'\n\nexport type MainRef = {\n  deps: ReadonlyArray<any>\n  runningCount: number\n}\n\nexport type SelfRef = {\n  isCurrent: boolean\n  deps: ReadonlyArray<any>\n}\n\nexport const useAsyncEffect = (\n  fn: (ref: SelfRef, mainRef: MainRef) => Promise<void>,\n  deps: ReadonlyArray<any>,\n) => {\n  const mainRef = React.useRef<MainRef>({\n    deps: deps,\n    runningCount: 0,\n  })\n  mainRef.current.deps = deps\n  React.useEffect(() => {\n    const selfRef: SelfRef = {\n      isCurrent: true,\n      deps,\n    }\n    mainRef.current.runningCount++\n    fn(selfRef, mainRef.current).finally(() => {\n      console.log('async fin')\n      mainRef.current.runningCount--\n    })\n    return () => {\n      selfRef.isCurrent = false\n    }\n  }, deps)\n}\n\nexport default useAsyncEffect\n","import _ from 'lodash'\nimport classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport MapType, { ObjectLayer as ObjectLayerType, Map2D } from 'maptype'\nimport makeUrl from 'helpers/makeUrl'\nimport useAsyncEffect from 'hooks/useAsyncEffect'\n\nexport interface ObjectLayerProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  layerId: string\n  layerDef: ObjectLayerType\n  mapDef: MapType\n}\n\nexport const ObjectLayer: React.FC<ObjectLayerProps> = (props) => {\n  const { className, mapDef, layerDef } = props\n  const classes = useStyles(mapDef)\n\n  const [walkable, setWalkable] = React.useState<Map2D<number> | null>(\n    'src' in layerDef.walkable ? null : layerDef.walkable,\n  )\n\n  useAsyncEffect(\n    async (self) => {\n      if (!walkable && 'src' in layerDef.walkable) {\n        const img = document.createElement('img')\n        img.src = makeUrl(layerDef.walkable.src)\n        img.onload = () => {\n          if (!self.isCurrent) return\n          const canvas = document.createElement('canvas')\n          canvas.width = img.width\n          canvas.height = img.height\n          const ctx = canvas.getContext('2d')\n          if (!ctx) throw new Error('not-support-canvas')\n          ctx.drawImage(img, 0, 0, img.width, img.height)\n\n          const wk = _.times(mapDef.gridCount.height, (y) =>\n            _.times(mapDef.gridCount.width, (x) => {\n              const px = ctx.getImageData(\n                x * mapDef.gridSize.width + mapDef.gridSize.width / 2,\n                y * mapDef.gridSize.height + mapDef.gridSize.height / 2,\n                1,\n                1,\n              ).data\n              return px[0] ? 0 : 1\n            }),\n          )\n\n          setWalkable(wk)\n        }\n      }\n    },\n    [mapDef, walkable, layerDef.walkable],\n  )\n\n  return (\n    walkable && (\n      <div className={classNames(className, classes.root)}>\n        {_.times(mapDef.gridCount.height, (y) => {\n          return _.times(mapDef.gridCount.width, (x) => {\n            return (\n              <div\n                key={y + ':' + x}\n                style={{\n                  top: y * mapDef.gridSize.height,\n                  left: x * mapDef.gridSize.width,\n                }}\n                className={classNames(classes.tile, classes.tileSize, {\n                  [classes.walkable]: walkable[y]?.[x],\n                })}\n              />\n            )\n          })\n        })}\n      </div>\n    )\n  )\n}\n\nObjectLayer.defaultProps = {}\n\nexport default ObjectLayer\n","import ObjectLayer from './ObjectLayer'\n\nexport default ObjectLayer\n","import classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport MapType, { AllLayer } from 'maptype'\nimport ImageLayer from 'components/ImageLayer'\nimport ObjectLayer from 'components/ObjectLayer'\nimport { createReducer, createAction } from '@reduxjs/toolkit'\nimport { useSpring, animated } from 'react-spring'\n\nexport interface GameMapProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  mapDef: MapType\n}\n\ntype CameraState = {\n  isMoving: boolean\n  position: {\n    x: number\n    y: number\n  }\n  zoom: number\n}\nconst initialCameraState: CameraState = {\n  isMoving: false,\n  position: {\n    x: 0,\n    y: 0,\n  },\n  zoom: 1,\n}\n\nconst cameraMoveStart = createAction('cameramovestart')\nconst cameraZoomRelative = createAction<number>('cameramovezoomrelative')\nconst cameraMoveRelative = createAction<{ x: number; y: number }>(\n  'cameramoverelative',\n)\nconst cameraMoveEnd = createAction('cameramoveend')\nconst cameraReducer = createReducer(initialCameraState, (builder) =>\n  builder\n    .addCase(cameraMoveStart, (state, action) => {\n      state.isMoving = true\n    })\n    .addCase(cameraMoveEnd, (state, action) => {\n      state.isMoving = false\n    })\n    .addCase(cameraMoveRelative, (state, action) => {\n      state.position.x += action.payload.x\n      state.position.y += action.payload.y\n    })\n    .addCase(cameraZoomRelative, (state, action) => {\n      state.zoom = Math.min(8, Math.max(0.1, state.zoom + action.payload))\n    }),\n)\n\nexport const MapLayerContainer = React.memo(\n  ({ mapDef }: { mapDef: MapType }) => {\n    const classes = useStyles(mapDef)\n    const layerComponentRender = (layerId: string, layerDef: AllLayer) => {\n      switch (layerDef.type) {\n        case 'image':\n          return (\n            <ImageLayer\n              className={classes.layer}\n              key={layerId}\n              layerId={layerId}\n              layerDef={layerDef}\n              mapDef={mapDef}\n            />\n          )\n        case 'object':\n          return (\n            <ObjectLayer\n              className={classes.layer}\n              key={layerId}\n              layerId={layerId}\n              layerDef={layerDef}\n              mapDef={mapDef}\n            />\n          )\n        default:\n          return null\n      }\n    }\n    return (\n      <>\n        {mapDef.layerOrder.map((layerId) => {\n          return layerComponentRender(layerId, mapDef.layerDefs[layerId])\n        })}\n      </>\n    )\n  },\n)\n\nexport const GameMap: React.FC<GameMapProps> = (props) => {\n  const classes = useStyles(props)\n  const { className, mapDef } = props\n\n  const [cameraState, cameraDispatch] = React.useReducer(\n    cameraReducer,\n    initialCameraState,\n  )\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.button === 1) {\n      cameraDispatch(cameraMoveStart())\n    }\n  }\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (cameraState.isMoving) {\n      cameraDispatch(cameraMoveRelative({ x: e.movementX, y: e.movementY }))\n    }\n  }\n\n  React.useEffect(() => {\n    const handleMouseUp = (e: MouseEvent) => {\n      if (e.button === 1) {\n        cameraDispatch(cameraMoveEnd())\n      }\n    }\n    const handleWheel = (e: WheelEvent) => {\n      cameraDispatch(cameraZoomRelative(-e.deltaY / 200))\n    }\n    window.addEventListener('mouseup', handleMouseUp)\n    window.addEventListener('wheel', handleWheel)\n    return () => {\n      window.removeEventListener('mouseup', handleMouseUp)\n      window.removeEventListener('wheel', handleWheel)\n    }\n  }, [])\n\n  const pp = useSpring({ zoom: cameraState.zoom })\n\n  return (\n    <div\n      className={classNames(className, classes.root)}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}>\n      <animated.div\n        className={classes.layerContainer}\n        style={{\n          transform: pp.zoom.interpolate(\n            (zoom) =>\n              `translate(${cameraState.position.x}px,${cameraState.position.y}px) scale(${zoom})`,\n          ),\n        }}>\n        <MapLayerContainer mapDef={mapDef} />\n      </animated.div>\n      <div className={classes.controllInstruction}>\n        Middle mouse click and drag to move camera, middle wheel to zoom\n      </div>\n    </div>\n  )\n}\n\nGameMap.defaultProps = {}\n\nexport default GameMap\n","import GameMap from './GameMap'\n\nexport default GameMap\n","import createMuiTheme, {\n  ThemeOptions,\n  Theme,\n} from '@material-ui/core/styles/createMuiTheme'\nimport { Mixins, MixinsOptions } from '@material-ui/core/styles/createMixins'\nimport { CSSProperties } from '@material-ui/styles/withStyles'\nimport * as CSS from 'csstype'\nimport { Overrides } from '@material-ui/core/styles/overrides'\n\nimport { amber, red, grey } from '@material-ui/core/colors'\n\nconst flexDirectionCenter = {\n  row: { justifyContent: 'center' },\n  column: { alignItems: 'center' },\n}\n\nexport const sansFonts =\n  'Kanit, Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\nexport const serifFonts =\n  'Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\n\nexport const noiseImage = '' //createNoiseImage({ color: grey[500] })\n\nexport const overrides = (theme: Theme): Overrides => ({\n  MuiListItem: {\n    root: {\n      borderLeftStyle: 'solid',\n      borderLeftColor: theme.palette.primary.main,\n      borderLeftWidth: 0,\n    },\n  },\n  MuiFormControl: {\n    root: {\n      '&.border': {\n        borderColor: 'rgba(0,0,0,0.3)',\n        borderStyle: 'solid',\n        borderWidth: 1,\n        borderRadius: theme.shape.borderRadius,\n      },\n    },\n  },\n  MuiListItemText: {\n    root: {\n      '&.compact': {\n        display: 'none',\n      },\n    },\n  },\n  MuiExpansionPanelSummary: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiFormLabel: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiCssBaseline: {\n    '@global': {\n      body: {\n        backgroundColor: grey[700],\n        backgroundImage: `url(\"${noiseImage}\")`,\n        backgroundBlendMode: 'soft-light',\n      },\n      '@font-face': {\n        fontFamily: 'prompt',\n        unicodeRange: 'U+0E00-0E7F ',\n      },\n    },\n  },\n})\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    drawer: CSSProperties\n    main: CSSProperties\n    sidebar: CSSProperties\n  }\n  interface ThemeOptions extends Partial<Theme> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createTypography' {\n  interface Typography {\n    sansFonts: string\n    serifFonts: string\n  }\n  interface TypographyOptions extends Partial<Mixins> {}\n}\n\nexport const theme = {\n  palette: {\n    background: {\n      // default: grey[400],\n    },\n    type: 'dark',\n    primary: amber,\n    secondary: red,\n  },\n  mixins: {\n    flex: (direction: 'column' | 'row' = 'column', ...options) => ({\n      display: 'flex',\n      flexDirection: direction,\n      ...(options.includes('center') ? flexDirectionCenter[direction] : {}),\n      ...(options.includes('wrap') ? { flexWrap: 'wrap' } : {}),\n    }),\n    imageAvatar: () => ({\n      borderRadius: '12%',\n    }),\n    mixBackgroundColor: (theme, color) => ({\n      backgroundColor: color,\n      color: theme.palette.getContrastText(color),\n    }),\n  } as MixinsOptions,\n  drawer: {\n    width: 240,\n  },\n  main: {\n    width: 720,\n  },\n  sidebar: {\n    width: 300,\n    flex: '0 0 300px',\n  },\n  typography: {\n    fontSize: 14,\n    fontFamily: serifFonts,\n    sansFonts,\n    serifFonts,\n    // Tell Material-UI what the font-size on the html element is.\n    // htmlFontSize: 10,\n    h1: {\n      fontFamily: sansFonts,\n    },\n    h2: {\n      fontFamily: sansFonts,\n    },\n    h3: {\n      fontFamily: sansFonts,\n    },\n    h4: {\n      fontFamily: sansFonts,\n    },\n    h5: {\n      fontFamily: sansFonts,\n    },\n    h6: {\n      fontFamily: sansFonts,\n    },\n    // id: {\n    //   fontFamily: 'monospace',\n    //   fontSize: '0.7rem',\n    //   color: 'rgba(0,0,0,0.2)',\n    // },\n  },\n} as ThemeOptions\n\nexport default createMuiTheme(theme)\n","import React from 'react'\nimport map1Def from 'mapdefs/demo1def.yaml'\nimport map2Def from 'mapdefs/demo2def.yaml'\nimport GameMap from 'components/GameMap'\nimport ThemeProvider from '@material-ui/styles/ThemeProvider'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\nimport partialTheme from 'theme'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\n\nconst theme = createMuiTheme(partialTheme)\n\nfunction App() {\n  return (\n    <HashRouter basename={process.env.PUBLIC_URL}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline>\n          <div className=\"App\">\n            <Switch>\n              <Route path=\"/demo1\">\n                <GameMap mapDef={map1Def} />\n              </Route>\n              <Route path=\"/demo2\">\n                <GameMap mapDef={map2Def} />\n              </Route>\n\n              <Route>\n                <GameMap mapDef={map1Def} />\n              </Route>\n            </Switch>\n          </div>\n        </CssBaseline>\n      </ThemeProvider>\n    </HashRouter>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\"gridCount\":{\"width\":36,\"height\":24},\"gridSize\":{\"width\":70,\"height\":70},\"layerOrder\":[\"imagelayer1\",\"objectlayer1\"],\"layerDefs\":{\"imagelayer1\":{\"type\":\"image\",\"src\":\"/assets/map.png\"},\"objectlayer1\":{\"type\":\"object\",\"walkable\":[[1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[0,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,1,1,0,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1],[1,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1],[1,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,1,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}}}","module.exports = {\"gridCount\":{\"width\":22,\"height\":12},\"gridSize\":{\"width\":50,\"height\":50},\"layerOrder\":[\"imagelayer1\",\"objectlayer1\"],\"layerDefs\":{\"imagelayer1\":{\"type\":\"image\",\"src\":\"/assets/demo2/map.png\"},\"objectlayer1\":{\"type\":\"object\",\"walkable\":{\"src\":\"/assets/demo2/walkabledef.png\"}}}}"],"sourceRoot":""}