{"version":3,"sources":["mapdefs/demo2def.yaml","theme/makeStyles.ts","components/GameMap/styles.ts","components/ImageLayer/styles.ts","helpers/makeUrl.ts","components/ImageLayer/ImageLayer.tsx","components/ImageLayer/index.ts","components/ObjectLayer/styles.ts","components/GameObject/styles.ts","helpers/vectorUtils.ts","helpers/promiseUtils.ts","store/game.ts","components/GameObject/GameObject.tsx","components/GameObject/index.ts","components/ObjectLayer/ObjectLayer.tsx","components/ObjectLayer/index.ts","components/CameraControl/styles.ts","store/camera.ts","components/CameraControl/CameraControl.tsx","components/CameraControl/index.ts","store/store.ts","components/GameMap/GameMap.tsx","components/GameMap/index.ts","theme/index.ts","App.tsx","serviceWorker.ts","index.tsx","mapdefs/demo1def.yaml"],"names":["module","exports","makeStyles","styles","options","oriMakeStyles","omit","theme","root","layer","position","top","left","userSelect","name","index","makeUrl","url","startsWith","process","ImageLayer","props","classes","useStyles","className","layerId","layerDef","classNames","src","alt","defaultProps","tileSize","gridSize","width","height","tile","backgroundColor","borderStyle","borderColor","borderWidth","walkable","displayMove","cursor","selectable","surround4","x","y","distance","p1","p2","dx","dy","Math","sqrt","inbound","pos","x1","y1","x2","y2","posToString","Symbol","iterator","toStringTag","PositionSet","internalSet","this","Set","clear","callbackfn","thisArg","Error","item","add","has","delete","size","sleep","time","Promise","resolve","setTimeout","initMap","createAsyncThunk","arg","a","dispatch","prepareWalkableLayer","pathFind","map","gridCount","origin","destination","passthrough","range","nextqueue","PQueue","comparator","b","visited","fromMap","Map","rangeMap","reached","forEach","queue","set","currentPos","dequeue","currentRange","get","length","pminus1","path","push","prepareObjectWalkMap","state","objectId","gameObject","objectDefs","layerDefs","walkmap","_","cloneDeep","objectsOnLayer","pickBy","group","selectObject","createAction","deselectObject","moveObject","walkObject","getState","selected","stat","movementRange","nextMove","pop","split","Number","nextPos","loaded","all","Object","keys","reject","img","document","createElement","onload","canvas","ctx","getContext","drawImage","wk","times","getImageData","data","onerror","gameReducer","createReducer","builder","addCase","pending","action","meta","animating","moveableDisplay","fulfilled","payload","id","visitQueue","shift","filter","p","GameObject","useDispatch","useSelector","objectDef","spriteDef","spriteDefs","sprite","style","useSpring","transform","config","duration","type","onClick","undefined","draggable","WalkableIndicatorTile","React","key","WalkableIndicator","ObjectLayer","objId","layerContainer","transformOrigin","controlInstruction","bottom","color","borderTopRightRadius","shape","borderRadius","borderTopLeftRadius","padding","cameraMoveStart","cameraZoomRelative","cameraMoveRelative","cameraMoveSourceRelative","cameraMoveEnd","cameraZoomStart","cameraZoomEnd","cameraReducer","isMoving","cameraOriginalPosition","moveSourcePosition","zoom","isZooming","sourcePosition","center","screen","originalZoom","newZoom","min","max","zoomDeltaRatio","zoomDelta","dcx","dcy","screenCenterDeltaCamPos","centerDeltaCamPos","screenCenterDistance","centerRatio","deltaCamPos","CameraControl","children","cameraState","camera","cameraDispatch","ref","handleMouseUp","e","button","handleWheel","current","deltaY","pageX","pageY","clientWidth","clientHeight","window","addEventListener","removeEventListener","stiff","onMouseDown","onMouseMove","onTouchStart","console","log","touches","onTouchMove","div","store","configureStore","reducer","combineReducers","Layer","layerComponentRender","MapLayerContainer","layerOrder","GameMap","mapDef","ready","Boolean","flexDirectionCenter","row","justifyContent","column","alignItems","sansFonts","serifFonts","palette","background","primary","amber","secondary","red","mixins","flex","direction","display","flexDirection","includes","flexWrap","imageAvatar","mixBackgroundColor","getContrastText","drawer","main","sidebar","typography","fontSize","fontFamily","h1","h2","h3","h4","h5","h6","createMuiTheme","partialTheme","App","basename","ThemeProvider","CssBaseline","map1Def","map2Def","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","then","registration","unregister","catch","error","message"],"mappings":"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,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,WAAa,CAAC,MAAQ,CAAC,OAAS,QAAQ,MAAQ,eAAe,MAAQ,EAAE,SAAW,CAAC,EAAI,EAAE,EAAI,IAAI,KAAO,CAAC,cAAgB,IAAI,MAAQ,CAAC,OAAS,QAAQ,MAAQ,eAAe,MAAQ,EAAE,SAAW,CAAC,EAAI,EAAE,EAAI,GAAG,KAAO,CAAC,cAAgB,MAAM,WAAa,CAAC,MAAQ,CAAC,KAAO,QAAQ,IAAM,+B","file":"static/js/main.68e4896a.chunk.js","sourcesContent":["module.exports = {\"gridCount\":{\"width\":22,\"height\":12},\"gridSize\":{\"width\":50,\"height\":50},\"layerOrder\":[\"imagelayer1\",\"objectlayer1\"],\"layerDefs\":{\"imagelayer1\":{\"type\":\"image\",\"src\":\"/assets/demo2/map.png\"},\"objectlayer1\":{\"type\":\"object\",\"walkable\":{\"src\":\"/assets/demo2/walkabledef.png\"}}},\"objectDefs\":{\"hero1\":{\"sprite\":\"hero1\",\"layer\":\"objectlayer1\",\"group\":1,\"position\":{\"x\":4,\"y\":3},\"stat\":{\"movementRange\":4}},\"hero2\":{\"sprite\":\"hero1\",\"layer\":\"objectlayer1\",\"group\":1,\"position\":{\"x\":6,\"y\":4},\"stat\":{\"movementRange\":4}}},\"spriteDefs\":{\"hero1\":{\"type\":\"image\",\"src\":\"/assets/demo2/hero1.png\"}}}","import omit from 'lodash/omit'\nimport { Theme } from '@material-ui/core/styles/createMuiTheme'\nimport { makeStyles as oriMakeStyles } from '@material-ui/styles'\n\nimport { Styles, WithStylesOptions } from '@material-ui/styles/withStyles'\n\nexport const makeStyles = <\n  Props extends {} = {},\n  ClassKey extends string = string\n>(\n  styles: Styles<Theme, Props, ClassKey>,\n  options?: WithStylesOptions<Theme>,\n) => {\n  return oriMakeStyles(\n    styles,\n    process.env.NODE_ENV === 'production' ? omit(options, 'name') : options,\n  )\n}\nexport default makeStyles\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // position: 'absolute',\n      // width: '100vw',\n      // height: '100vh',\n    },\n\n    layer: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      userSelect: 'none',\n    },\n  }),\n  { name: 'GameMap', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {},\n  }),\n  { name: 'ImageLayer', index: 1 },\n)\n","export const makeUrl = (url: string) => {\n  if (url) {\n    if (url.startsWith('/')) {\n      return process.env.PUBLIC_URL + url\n    }\n  }\n\n  return url\n}\n\nexport default makeUrl\n","import classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport MapType, { ImageLayer as ImageLayerType } from 'maptype'\nimport makeUrl from 'helpers/makeUrl'\n\nexport interface ImageLayerProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  layerId: string\n  layerDef: ImageLayerType\n}\n\nexport const ImageLayer: React.FC<ImageLayerProps> = (props) => {\n  const classes = useStyles(props)\n  const { className, layerId, layerDef } = props\n\n  return (\n    <div className={classNames(className, classes.root)}>\n      <img src={makeUrl(layerDef.src)} alt={layerId} />\n    </div>\n  )\n}\n\nImageLayer.defaultProps = {}\n\nexport default ImageLayer\n","import ImageLayer from './ImageLayer'\n\nexport default ImageLayer\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\nimport MapType, { Size2D } from 'maptype'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      // style code\n    },\n    tileSize: (gridSize: Size2D) => ({\n      width: gridSize.width,\n      height: gridSize.height,\n    }),\n    tile: {\n      backgroundColor: 'rgba(255,0,0,0.3)',\n      position: 'absolute',\n      borderStyle: 'solid',\n      borderColor: 'rgba(255,0,0,0.3)',\n      borderWidth: 1,\n    },\n    walkable: {\n      backgroundColor: 'unset',\n      borderColor: 'rgba(0,255,0,0.1)',\n    },\n    displayMove: {\n      backgroundColor: 'rgba(0,255,0,0.3)',\n      cursor: 'cell',\n    },\n  }),\n  { name: 'ObjectLayer', index: 1 },\n)\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      position: 'absolute',\n      userSelect: 'none',\n    },\n    selectable: {\n      cursor: 'pointer',\n    },\n  }),\n  { name: 'GameObject', index: 1 },\n)\n","import { Position } from 'maptype'\n\nexport const surround4 = (position: Position) => {\n  return [\n    { x: position.x + 1, y: position.y },\n    { x: position.x - 1, y: position.y },\n    { x: position.x, y: position.y - 1 },\n    { x: position.x, y: position.y + 1 },\n  ]\n}\n\nexport const distance = (p1: Position, p2: Position) => {\n  const dx = p1.x - p2.x\n  const dy = p1.y - p2.y\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\nexport const inbound = (\n  pos: Position,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n) => x1 <= pos.x && pos.x < x2 && y1 <= pos.y && pos.y < y2\n\nexport const posToString = (position: Position) => `${position.x},${position.y}`\n\nexport const vectorEq = (p1: Position, p2: Position) =>\n  p1.x === p2.x && p1.y === p2.y\n\nexport class PositionSet implements Set<Position> {\n  private internalSet: Set<string>\n  public constructor() {\n    this.internalSet = new Set()\n  }\n  public clear(): void {\n    return this.internalSet.clear()\n  }\n  forEach(\n    callbackfn: (value: Position, value2: Position, set: Set<Position>) => void,\n    thisArg?: any,\n  ): void {\n    throw new Error('Method not implemented.')\n  }\n\n  public get size(): number {\n    return this.internalSet.size\n  }\n\n  [Symbol.iterator](): IterableIterator<Position> {\n    throw new Error('Method not implemented.')\n  }\n  entries(): IterableIterator<[Position, Position]> {\n    throw new Error('Method not implemented.')\n  }\n  keys(): IterableIterator<Position> {\n    throw new Error('Method not implemented.')\n  }\n  values(): IterableIterator<Position> {\n    throw new Error('Method not implemented.')\n  }\n  [Symbol.toStringTag]: string\n  public add(item: Position) {\n    this.internalSet.add(posToString(item))\n    return this\n  }\n  public has(item: Position) {\n    return this.internalSet.has(posToString(item))\n  }\n  public delete(item: Position) {\n    return this.internalSet.delete(posToString(item))\n  }\n}\n","export const sleep = (time: number = 0): Promise<void> =>\n  new Promise((resolve) => setTimeout(resolve, time))\n","import _ from 'lodash'\nimport { MapType, Position, Map2D, ObjectLayer, Size2D } from 'maptype'\nimport { createAction, createReducer, createAsyncThunk } from '@reduxjs/toolkit'\nimport { ThunkConfig, RootState } from './store'\nimport makeUrl from 'helpers/makeUrl'\nimport PQueue from 'js-priority-queue'\nimport {\n  surround4,\n  distance,\n  posToString,\n  PositionSet,\n  vectorEq,\n  inbound,\n} from 'helpers/vectorUtils'\nimport { sleep } from 'helpers/promiseUtils'\n\nexport type GameType = {\n  selected: string | null\n  animating: boolean\n  loaded: boolean\n  moveableDisplay: { [poscoordinate: string]: true } | null\n} & MapType\n\nexport const initMap = createAsyncThunk<MapType, MapType, ThunkConfig>(\n  'initMap',\n  async (arg, { dispatch }) => {\n    await dispatch(prepareWalkableLayer())\n    // const finalMap = produce(arg, (d) => {\n    //   Object.keys(wks).forEach((id) => {\n    //     ;(d.layerDefs[id] as ObjectLayer).walkable = wks[id]\n    //   })\n    // })\n    // return finalMap\n    return arg\n  },\n)\n\nexport const pathFind = ({\n  map,\n  gridCount,\n  origin,\n  destination,\n  passthrough = 0,\n  range = 1 / 0,\n}: {\n  map: Map2D<number>\n  gridCount: Size2D\n  origin: Position\n  destination: Position\n  passthrough?: number\n  range?: number\n}) => {\n  const nextqueue = new PQueue<Position>({\n    comparator: (a, b) => {\n      const da = distance(a, destination)\n      const db = distance(b, destination)\n      return da - db\n    },\n  })\n\n  const visited = new PositionSet()\n  const fromMap = new Map<string, string>()\n  const rangeMap = new Map<string, number>()\n  let reached = false\n  const around = surround4(origin)\n\n  around.forEach((pos) => {\n    if (\n      inbound(pos, 0, 0, gridCount.width, gridCount.height) &&\n      (map[pos.y][pos.x] === 0 || (map[pos.y][pos.x] ^ passthrough) === 0)\n    ) {\n      nextqueue.queue(pos)\n      fromMap.set(posToString(pos), posToString(origin))\n      rangeMap.set(posToString(pos), range)\n    }\n  })\n\n  while (nextqueue.length > 0) {\n    const currentPos = nextqueue.dequeue()\n    if (!visited.has(currentPos)) {\n      visited.add(currentPos)\n\n      if (vectorEq(currentPos, destination)) {\n        reached = true\n        break\n      }\n      const currentRange = rangeMap.get(posToString(currentPos))\n      if (currentRange == null || currentRange < 0) continue\n      const around = surround4(currentPos)\n\n      around.forEach((pos) => {\n        if (\n          !visited.has(pos) &&\n          (map[pos.y][pos.x] === 0 || (map[pos.y][pos.x] ^ passthrough) === 0)\n        ) {\n          nextqueue.queue(pos)\n          fromMap.set(posToString(pos), posToString(currentPos))\n          rangeMap.set(posToString(pos), currentRange - 1)\n        }\n      })\n    }\n  }\n\n  if (reached) {\n    let pminus1: string | undefined = posToString(destination)\n    const path: string[] = [pminus1]\n    do {\n      pminus1 = fromMap.get(pminus1!)\n      pminus1 && path.push(pminus1)\n      if (pminus1 === posToString(origin)) return path\n    } while (pminus1 && fromMap.size > 0)\n  }\n}\n\nexport const prepareObjectWalkMap = (state: GameType, objectId: string) => {\n  const gameObject = state.objectDefs[objectId]\n\n  const layer = state.layerDefs[gameObject.layer] as ObjectLayer\n\n  const walkmap = _.cloneDeep(layer.walkable) as Map2D<number>\n\n  const objectsOnLayer = _.pickBy(\n    state.objectDefs,\n    ({ layer }) => layer === gameObject.layer,\n  )\n\n  _.forEach(objectsOnLayer, ({ group, position }) => {\n    const tile = _.get(walkmap, [position.y, position.x])\n    _.set(\n      walkmap,\n      [position.y, position.x],\n      group && gameObject.group\n        ? (gameObject.group ^ group) === 0\n          ? group\n          : 0\n        : tile,\n    )\n  })\n\n  return walkmap\n}\n\nexport const selectObject = createAction<string>('selectObject')\nexport const deselectObject = createAction<string>('deselectObject')\nexport const moveObject = createAction<{\n  objectId: string\n  destination: Position\n}>('moveObject')\nexport const walkObject = createAsyncThunk<\n  void,\n  {\n    objectId?: string\n    destination: Position\n    ignoreBlock?: boolean\n    ignoreRange?: boolean\n  },\n  ThunkConfig\n>('walkObject', async (arg, { dispatch, getState }) => {\n  const state = getState() as RootState\n  const objectId = 'objectId' in arg ? arg.objectId! : state.map.selected!\n\n  const gameObject = state.map.objectDefs[objectId]\n  const walkmap = prepareObjectWalkMap(state.map, objectId)\n\n  const path = pathFind({\n    map: walkmap,\n    origin: gameObject.position,\n    destination: arg.destination,\n    passthrough: gameObject.group,\n    gridCount: state.map.gridCount,\n    range: gameObject.stat?.movementRange,\n  })\n\n  if (!path) {\n    throw new Error('path-invalid')\n  }\n  while (path.length) {\n    const nextMove = path.pop()!.split(',').map(Number)\n    const nextPos = { x: nextMove[0], y: nextMove[1] }\n    dispatch(moveObject({ destination: nextPos, objectId }))\n    await sleep(300)\n  }\n  // dispatch(moveObject(withId))\n})\n\nconst prepareWalkableLayer = createAsyncThunk<\n  { [id: string]: Map2D<number> },\n  void,\n  ThunkConfig\n>('prepareWalkableLayer', async (arg, { getState }) => {\n  const map = (getState() as RootState).map!\n  const loaded: { [id: string]: Map2D<number> } = {}\n\n  await Promise.all(\n    Object.keys(map.layerDefs).map(\n      (layerId) =>\n        new Promise((resolve, reject) => {\n          const layerDef = map.layerDefs[layerId] as ObjectLayer\n          if (layerDef.walkable && 'src' in layerDef.walkable) {\n            const img = document.createElement('img')\n            img.src = makeUrl(layerDef.walkable.src)\n            img.onload = () => {\n              const canvas = document.createElement('canvas')\n              canvas.width = img.width\n              canvas.height = img.height\n              const ctx = canvas.getContext('2d')\n              if (!ctx) throw new Error('not-support-canvas')\n              ctx.drawImage(img, 0, 0, img.width, img.height)\n\n              const wk = _.times(map.gridCount.height, (y) =>\n                _.times(map.gridCount.width, (x) => {\n                  const px = ctx.getImageData(\n                    x * map.gridSize.width + map.gridSize.width / 2,\n                    y * map.gridSize.height + map.gridSize.height / 2,\n                    1,\n                    1,\n                  ).data\n                  return px[0] ? -1 : 0\n                }),\n              )\n              loaded[layerId] = wk\n              resolve()\n            }\n            img.onerror = reject\n          } else {\n            resolve()\n          }\n        }),\n    ),\n  )\n  return loaded\n})\n\nexport const gameReducer = createReducer<GameType>(null as any, (builder) =>\n  builder\n    .addCase(initMap.pending, (state, action) => {\n      return {\n        ..._.cloneDeep(action.meta.arg),\n        selected: null,\n        animating: false,\n        moveableDisplay: null,\n        loaded: false,\n      }\n    })\n    .addCase(initMap.fulfilled, (state, action) => {\n      state.loaded = true\n    })\n    .addCase(prepareWalkableLayer.fulfilled, (state, action) => {\n      Object.keys(action.payload).forEach((id) => {\n        ;(state.layerDefs[id] as ObjectLayer).walkable = action.payload[id]\n      })\n    })\n    .addCase(selectObject, (state, action) => {\n      const walkmap = _.cloneDeep(prepareObjectWalkMap(state, action.payload))\n      const gameObject = state.objectDefs[action.payload]\n      if (!gameObject?.stat.movementRange) return\n      state.selected = action.payload\n      state.moveableDisplay = {}\n\n      const visited = new PositionSet()\n      const visitQueue: [Position, number][] = [\n        [gameObject.position, gameObject.stat!.movementRange!],\n      ]\n      visited.add(gameObject.position)\n\n      do {\n        const [currentPos, currentRange = -1] = visitQueue.shift() || []\n        if (!currentPos) return\n        if (currentRange < 0) continue\n\n        const tilegroup = _.get(walkmap, [currentPos.y, currentPos.x])\n        if (tilegroup === 0)\n          state.moveableDisplay![posToString(currentPos)] = true\n\n        visited.add(currentPos)\n\n        surround4(currentPos)\n          .filter(\n            (p) =>\n              inbound(p, 0, 0, state.gridCount.width, state.gridCount.height) &&\n              (_.get(walkmap, [p.y, p.x]) === 0 ||\n                _.get(walkmap, [p.y, p.x]) === gameObject.group) &&\n              !visited.has(p),\n          )\n          .forEach((p) => visitQueue.push([p, currentRange - 1]))\n      } while (visitQueue.length)\n    })\n    .addCase(deselectObject, (state, action) => {\n      state.selected = null\n      state.moveableDisplay = null\n    })\n    .addCase(moveObject, (state, action) => {\n      state.objectDefs[action.payload.objectId].position =\n        action.payload.destination\n      state.selected = null\n      state.moveableDisplay = null\n    })\n    .addCase(walkObject.pending, (state, action) => {\n      state.animating = true\n    })\n    .addCase(walkObject.fulfilled, (state, action) => {\n      state.animating = false\n    }),\n)\n","import classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { selectObject } from 'store/game'\nimport { useSpring, animated } from 'react-spring'\nimport makeUrl from 'helpers/makeUrl'\n\nexport interface GameObjectProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  objectId: string\n}\n\nexport const GameObject = (props: GameObjectProps) => {\n  const classes = useStyles(props)\n  const { className, objectId } = props\n  const dispatch = useDispatch()\n  const gridSize = useSelector((state) => state.map.gridSize)\n  const objectDef = useSelector((state) => state.map.objectDefs[objectId])\n  const spriteDef = useSelector(\n    (state) => state.map.spriteDefs[objectDef.sprite],\n  )\n\n  const selectable = useSelector((state) => !state.map.animating)\n\n  const style = useSpring({\n    transform: `translate(${gridSize.width * objectDef.position.x}px,${\n      gridSize.height * objectDef.position.y\n    }px)`,\n    config: { duration: 270 },\n  })\n\n  const handleSelect = () => {\n    dispatch(selectObject(objectId))\n  }\n\n  switch (spriteDef.type) {\n    case 'image':\n      return (\n        <animated.img\n          alt={`${objectId}:${objectDef.sprite}`}\n          className={classNames(className, classes.root, {\n            [classes.selectable]: selectable,\n          })}\n          style={style}\n          src={makeUrl(spriteDef.src)}\n          onClick={selectable ? handleSelect : undefined}\n          draggable={false}\n        />\n      )\n    default:\n      return null\n  }\n}\n\nGameObject.defaultProps = {}\n\nexport default GameObject\n","import GameObject from './GameObject'\n\nexport default GameObject\n","import _ from 'lodash'\nimport classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport { ObjectLayer as ObjectLayerType, Map2D } from 'maptype'\nimport { useSelector, useDispatch } from 'react-redux'\nimport GameObject from 'components/GameObject'\nimport { walkObject } from 'store/game'\n\nexport interface ObjectLayerProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  layerId: string\n  layerDef: ObjectLayerType\n}\n\nconst WalkableIndicatorTile = React.memo(\n  ({\n    x,\n    y,\n    classes,\n    layerId,\n  }: {\n    x: number\n    y: number\n    classes: any\n    layerId: string\n  }) => {\n    const gridSize = useSelector((state) => state.map.gridSize)\n    const displayMove = useSelector(\n      (state) => state.map.moveableDisplay?.[x + ',' + y],\n    )\n    const walkable = useSelector((state) => {\n      const layerDef = state.map.layerDefs?.[layerId]\n      return (\n        'walkable' in layerDef &&\n        (layerDef.walkable as Map2D<number>)[y][x] === 0\n      )\n    })\n    const dispatch = useDispatch()\n\n    return (\n      <div\n        key={y + ':' + x}\n        style={{\n          top: y * gridSize.height,\n          left: x * gridSize.width,\n        }}\n        className={classNames(classes.tile, classes.tileSize, {\n          [classes.walkable]: walkable,\n          [classes.displayMove]: walkable && displayMove,\n        })}\n        onClick={\n          walkable && displayMove\n            ? () => dispatch(walkObject({ destination: { x, y } }))\n            : undefined\n        }\n      />\n    )\n  },\n)\n\nexport const WalkableIndicator = React.memo(\n  ({ layerId }: { layerId: string }) => {\n    const gridSize = useSelector((state) => state.map.gridSize)\n    const gridCount = useSelector((state) => state.map.gridCount)\n    const classes = useStyles({ ...gridSize })\n    return (\n      <div className={classNames(classes.root)}>\n        {_.times(gridCount.height, (y) => {\n          return _.times(gridCount.width, (x) => {\n            return (\n              <WalkableIndicatorTile\n                x={x}\n                y={y}\n                classes={classes}\n                layerId={layerId}\n              />\n            )\n          })\n        })}\n      </div>\n    )\n  },\n)\n\nexport const ObjectLayer: React.FC<ObjectLayerProps> = (props) => {\n  const { className, layerDef, layerId } = props\n  const gridSize = useSelector((state) => state.map.gridSize)\n  const objectDefs = useSelector((state) => state.map.objectDefs)\n  const classes = useStyles({ ...gridSize })\n\n  return (\n    layerDef.walkable && (\n      <>\n        <WalkableIndicator layerId={layerId} />\n        {objectDefs &&\n          Object.keys(objectDefs)\n            .filter((objId) => objectDefs[objId].layer === layerId)\n            .map((objId) => <GameObject key={objId} objectId={objId} />)}\n      </>\n    )\n  )\n}\n\nObjectLayer.defaultProps = {}\n\nexport default ObjectLayer\n","import ObjectLayer from './ObjectLayer'\n\nexport default ObjectLayer\n","import makeStyles from 'theme/makeStyles'\nimport { Theme } from '@material-ui/core/styles'\n\nexport default makeStyles(\n  (theme: Theme) => ({\n    root: {\n      position: 'fixed',\n      height: '100%',\n      width: '100%',\n    },\n    layerContainer: {\n      transformOrigin: '0 0',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%',\n    },\n    controlInstruction: {\n      position: 'fixed',\n      bottom: 0,\n      left: '50%',\n      transform: 'translateX(-50%)',\n      backgroundColor: 'rgba(0,0,0,0.3)',\n      color: 'white',\n      borderTopRightRadius: theme.shape.borderRadius,\n      borderTopLeftRadius: theme.shape.borderRadius,\n      padding: 16,\n    },\n  }),\n  { name: 'CameraControl', index: 1 },\n)\n","import { Position, Size2D } from 'maptype'\nimport { createAction, createReducer } from '@reduxjs/toolkit'\n\ntype CameraState = {\n  isMoving: boolean\n  moveSourcePosition: Position | null\n  cameraOriginalPosition: Position | null\n  position: Position\n  zoom: number\n  isZooming: boolean\n}\nconst initialCameraState: CameraState = {\n  isMoving: false,\n  cameraOriginalPosition: null,\n  moveSourcePosition: null,\n  position: {\n    x: 0,\n    y: 0,\n  },\n  zoom: 1,\n  isZooming: false,\n}\n\nexport const cameraMoveStart = createAction<{ sourcePosition: Position }>(\n  'cameraMoveStart',\n)\nexport const cameraZoomRelative = createAction<{\n  zoom: number\n  center: Position\n  screen: Size2D\n}>('cameraZoomRelative')\nexport const cameraMoveRelative = createAction<Position>('cameraMoveRelative')\nexport const cameraMoveSourceRelative = createAction<Position>(\n  'cameraMoveSourceRelative',\n)\nexport const cameraMoveEnd = createAction('cameraMoveEnd')\nexport const cameraZoomStart = createAction('cameraZoomStart')\nexport const cameraZoomEnd = createAction('cameraZoomEnd')\nexport const cameraReducer = createReducer(initialCameraState, (builder) =>\n  builder\n    .addCase(cameraMoveStart, (state, action) => {\n      state.isMoving = true\n      state.moveSourcePosition = action.payload.sourcePosition\n      state.cameraOriginalPosition = { ...state.position }\n    })\n    .addCase(cameraMoveEnd, (state, action) => {\n      state.isMoving = false\n    })\n    .addCase(cameraMoveRelative, (state, action) => {\n      state.position.x += action.payload.x\n      state.position.y += action.payload.y\n    })\n    .addCase(cameraMoveSourceRelative, (state, action) => {\n      state.position.x =\n        state.cameraOriginalPosition!.x +\n        state.moveSourcePosition!.x -\n        action.payload.x\n      state.position.y =\n        state.cameraOriginalPosition!.y +\n        state.moveSourcePosition!.y -\n        action.payload.y\n    })\n    .addCase(cameraZoomStart, (state, action) => {\n      state.isZooming = true\n    })\n    .addCase(cameraZoomEnd, (state, action) => {\n      state.isZooming = false\n    })\n    .addCase(\n      cameraZoomRelative,\n      (state, { payload: { center, zoom, screen } }) => {\n        const originalZoom = state.zoom\n\n        const maxZoomOut = 0.25\n        const maxZoomIn = 4\n\n        const newZoom = Math.min(\n          maxZoomIn,\n          Math.max(maxZoomOut, state.zoom + zoom),\n        )\n        const zoomDeltaRatio = newZoom / originalZoom\n        const zoomDelta = newZoom - originalZoom\n\n        const zoomPosLag = 1\n\n        const dcx = center.x - screen.width / 2\n        const dcy = center.y - screen.height / 2\n\n        const worldCenterPost = {\n          x: (state.position.x + dcx) / originalZoom,\n          y: (state.position.y + dcy) / originalZoom,\n        }\n\n        const screenCenterDeltaCamPos = {\n          x: dcx * -zoomDeltaRatio * zoomPosLag,\n          y: dcy * -zoomDeltaRatio * zoomPosLag,\n        }\n\n        const centerDeltaCamPos = {\n          x: worldCenterPost.x * -zoomDelta * zoomPosLag,\n          y: worldCenterPost.y * -zoomDelta * zoomPosLag,\n        }\n\n        const screenCenterDistance = Math.sqrt(dcx * dcx + dcy * dcy)\n\n        // centerRatio = 0 fixed zoom center\n        // centerRatio = 1 zoom center to screen center\n        const centerRatio = 0.5 * Math.min(1, (1 / screenCenterDistance) * 20)\n        // const centerRatio = 0\n\n        const deltaCamPos = {\n          x:\n            centerDeltaCamPos.x -\n            (centerDeltaCamPos.x - screenCenterDeltaCamPos.x) * centerRatio,\n          y:\n            centerDeltaCamPos.y -\n            (centerDeltaCamPos.y - screenCenterDeltaCamPos.y) * centerRatio,\n        }\n\n        const position = {\n          x: state.position.x - deltaCamPos.x,\n          y: state.position.y - deltaCamPos.y,\n        }\n        state.zoom = newZoom\n        state.position = position\n      },\n    ),\n)\n","import classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useSpring, config, animated } from 'react-spring'\nimport {\n  cameraMoveStart,\n  cameraMoveSourceRelative,\n  cameraMoveEnd,\n  cameraZoomStart,\n  cameraZoomRelative,\n} from 'store/camera'\nexport interface CameraControlProps {\n  children: React.ReactNode\n}\n\nexport const CameraControl = ({ children }: CameraControlProps) => {\n  const classes = useStyles({})\n  const cameraState = useSelector((state: any) => state.camera)\n  const cameraDispatch = useDispatch()\n\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.button === 1) {\n      cameraDispatch(\n        cameraMoveStart({ sourcePosition: { x: e.pageX, y: e.pageY } }),\n      )\n    }\n  }\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (cameraState.isMoving) {\n      cameraDispatch(cameraMoveSourceRelative({ x: e.pageX, y: e.pageY }))\n    }\n  }\n\n  const handleTouchMove = (e: React.TouchEvent<HTMLDivElement>) => {\n    console.log(e.touches)\n    if (cameraState.isMoving) {\n      cameraDispatch(\n        cameraMoveSourceRelative({\n          x: e.touches[0].pageX,\n          y: e.touches[0].pageY,\n        }),\n      )\n    }\n  }\n\n  const handleTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    console.log(e.touches)\n    if (e.touches.length === 1) {\n      cameraDispatch(\n        cameraMoveStart({\n          sourcePosition: { x: e.touches[0].pageX, y: e.touches[0].pageY },\n        }),\n      )\n    } else if (e.touches.length === 2) {\n      cameraDispatch(cameraMoveEnd())\n      cameraDispatch(cameraZoomStart())\n    }\n  }\n\n  React.useEffect(() => {\n    const handleMouseUp = (e: MouseEvent) => {\n      if (e.button === 1) {\n        cameraDispatch(cameraMoveEnd())\n      }\n    }\n    const handleWheel = (e: WheelEvent) => {\n      ref.current &&\n        cameraDispatch(\n          cameraZoomRelative({\n            zoom: -e.deltaY / 200,\n            center: { x: e.pageX, y: e.pageY },\n            screen: {\n              width: ref.current.clientWidth,\n              height: ref.current.clientHeight,\n            },\n          }),\n        )\n    }\n    window.addEventListener('mouseup', handleMouseUp)\n    window.addEventListener('wheel', handleWheel)\n    return () => {\n      window.removeEventListener('mouseup', handleMouseUp)\n      window.removeEventListener('wheel', handleWheel)\n    }\n  }, [cameraDispatch])\n\n  const { transform } = useSpring({\n    // camera: [cameraState.zoom, cameraState.position.x, cameraState.position.y],\n    transform: `translate(50%,50%) translate(${-cameraState.position\n      .x}px,${-cameraState.position.y}px) scale(${cameraState.zoom})`,\n    config: config.stiff,\n  })\n\n  return (\n    <div\n      ref={ref}\n      className={classNames(classes.root)}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleTouchMove}>\n      <animated.div\n        className={classes.layerContainer}\n        style={{\n          transform,\n        }}>\n        {children}\n      </animated.div>\n      <div className={classes.controlInstruction}>\n        Middle mouse click and drag to move camera, middle wheel to zoom\n      </div>\n    </div>\n  )\n}\nCameraControl.defaultProps = {}\n\nexport default CameraControl\n","import CameraControl from './CameraControl'\n\nexport default CameraControl\n","import { configureStore, combineReducers } from '@reduxjs/toolkit'\nimport { cameraReducer } from './camera'\nimport { gameReducer } from './game'\n\nconst store = configureStore({\n  reducer: combineReducers({ camera: cameraReducer, map: gameReducer }),\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n\ndeclare module 'react-redux' {\n  interface DefaultRootState extends RootState {}\n}\n\nexport type ThunkConfig = {\n  // dispatch: AppDispatch\n  // state: RootState\n}\n\nexport default store\n","// import _ from 'lodash'\nimport classNames from 'clsx'\nimport * as React from 'react'\nimport useStyles from './styles'\nimport MapType, { AllLayer } from 'maptype'\nimport ImageLayer from 'components/ImageLayer'\nimport ObjectLayer from 'components/ObjectLayer'\nimport { Provider, useSelector, useDispatch } from 'react-redux'\nimport CameraControl from 'components/CameraControl'\nimport store from 'store/store'\nimport { initMap } from 'store/game'\n\nexport interface GameMapProps {\n  classes?: Partial<ReturnType<typeof useStyles>>\n  className?: string\n  mapDef: MapType\n}\n\nexport const Layer = React.memo(({ layerId }: { layerId: string }) => {\n  const classes = useStyles({})\n  const layerDef = useSelector((state) => state.map.layerDefs[layerId])\n  const layerComponentRender = (layerId: string) => {\n    switch (layerDef.type) {\n      case 'image':\n        return (\n          <ImageLayer\n            className={classes.layer}\n            key={layerId}\n            layerId={layerId}\n            layerDef={layerDef}\n          />\n        )\n      case 'object':\n        return (\n          <ObjectLayer\n            className={classes.layer}\n            key={layerId}\n            layerId={layerId}\n            layerDef={layerDef}\n          />\n        )\n      default:\n        return null\n    }\n  }\n  return layerComponentRender(layerId)\n})\n\nexport const MapLayerContainer = React.memo(() => {\n  const layerOrder = useSelector((state) => state.map.layerOrder)\n\n  return (\n    <>\n      {layerOrder.map((layerId) => (\n        <Layer key={layerId} layerId={layerId} />\n      ))}\n    </>\n  )\n})\n\nexport const GameMap: React.FC<GameMapProps> = (props) => {\n  const classes = useStyles(props)\n  const { className, mapDef } = props\n\n  const ready = useSelector((state) => Boolean(state.map))\n  const loaded = useSelector((state) => Boolean(state.map?.loaded))\n  const dispatch = useDispatch()\n  React.useEffect(() => {\n    if (!ready) {\n      dispatch(initMap(mapDef))\n    }\n  }, [dispatch, ready, mapDef])\n\n  return loaded && ready ? (\n    <div className={classes.root}>\n      <CameraControl>\n        <MapLayerContainer />\n      </CameraControl>\n    </div>\n  ) : null\n}\n\nexport const GameRoot = (props: GameMapProps) => {\n  return (\n    <Provider store={store}>\n      <GameMap {...props} />\n    </Provider>\n  )\n}\n\nexport default GameRoot\n","import GameMap from './GameMap'\n\nexport default GameMap\n","import createMuiTheme, {\n  ThemeOptions,\n  Theme,\n} from '@material-ui/core/styles/createMuiTheme'\nimport { Mixins, MixinsOptions } from '@material-ui/core/styles/createMixins'\nimport { CSSProperties } from '@material-ui/styles/withStyles'\nimport * as CSS from 'csstype'\nimport { Overrides } from '@material-ui/core/styles/overrides'\n\nimport { amber, red, grey } from '@material-ui/core/colors'\n\nconst flexDirectionCenter = {\n  row: { justifyContent: 'center' },\n  column: { alignItems: 'center' },\n}\n\nexport const sansFonts =\n  'Kanit, Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\nexport const serifFonts =\n  'Sarabun, Prompt, \"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\n\nexport const noiseImage = '' //createNoiseImage({ color: grey[500] })\n\nexport const overrides = (theme: Theme): Overrides => ({\n  MuiListItem: {\n    root: {\n      borderLeftStyle: 'solid',\n      borderLeftColor: theme.palette.primary.main,\n      borderLeftWidth: 0,\n    },\n  },\n  MuiFormControl: {\n    root: {\n      '&.border': {\n        borderColor: 'rgba(0,0,0,0.3)',\n        borderStyle: 'solid',\n        borderWidth: 1,\n        borderRadius: theme.shape.borderRadius,\n      },\n    },\n  },\n  MuiListItemText: {\n    root: {\n      '&.compact': {\n        display: 'none',\n      },\n    },\n  },\n  MuiExpansionPanelSummary: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiFormLabel: {\n    root: {\n      fontFamily: sansFonts,\n    },\n  },\n  MuiCssBaseline: {\n    '@global': {\n      body: {\n        backgroundColor: grey[700],\n        backgroundImage: `url(\"${noiseImage}\")`,\n        backgroundBlendMode: 'soft-light',\n      },\n      '@font-face': {\n        fontFamily: 'prompt',\n        unicodeRange: 'U+0E00-0E7F ',\n      },\n    },\n  },\n})\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    drawer: CSSProperties\n    main: CSSProperties\n    sidebar: CSSProperties\n  }\n  interface ThemeOptions extends Partial<Theme> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createMixins' {\n  interface Mixins {\n    flex: (\n      direction: CSS.FlexDirectionProperty,\n      ...option: string[]\n    ) => CSSProperties\n    imageAvatar: () => CSSProperties\n    mixBackgroundColor: (theme: Theme, color: string) => CSSProperties\n  }\n  interface MixinsOptions extends Partial<Mixins> {}\n}\n\ndeclare module '@material-ui/core/styles/createTypography' {\n  interface Typography {\n    sansFonts: string\n    serifFonts: string\n  }\n  interface TypographyOptions extends Partial<Mixins> {}\n}\n\nexport const theme = {\n  palette: {\n    background: {\n      // default: grey[400],\n    },\n    type: 'dark',\n    primary: amber,\n    secondary: red,\n  },\n  mixins: {\n    flex: (direction: 'column' | 'row' = 'column', ...options) => ({\n      display: 'flex',\n      flexDirection: direction,\n      ...(options.includes('center') ? flexDirectionCenter[direction] : {}),\n      ...(options.includes('wrap') ? { flexWrap: 'wrap' } : {}),\n    }),\n    imageAvatar: () => ({\n      borderRadius: '12%',\n    }),\n    mixBackgroundColor: (theme, color) => ({\n      backgroundColor: color,\n      color: theme.palette.getContrastText(color),\n    }),\n  } as MixinsOptions,\n  drawer: {\n    width: 240,\n  },\n  main: {\n    width: 720,\n  },\n  sidebar: {\n    width: 300,\n    flex: '0 0 300px',\n  },\n  typography: {\n    fontSize: 14,\n    fontFamily: serifFonts,\n    sansFonts,\n    serifFonts,\n    // Tell Material-UI what the font-size on the html element is.\n    // htmlFontSize: 10,\n    h1: {\n      fontFamily: sansFonts,\n    },\n    h2: {\n      fontFamily: sansFonts,\n    },\n    h3: {\n      fontFamily: sansFonts,\n    },\n    h4: {\n      fontFamily: sansFonts,\n    },\n    h5: {\n      fontFamily: sansFonts,\n    },\n    h6: {\n      fontFamily: sansFonts,\n    },\n    // id: {\n    //   fontFamily: 'monospace',\n    //   fontSize: '0.7rem',\n    //   color: 'rgba(0,0,0,0.2)',\n    // },\n  },\n} as ThemeOptions\n\nexport default createMuiTheme(theme)\n","import React from 'react'\nimport map1Def from 'mapdefs/demo1def.yaml'\nimport map2Def from 'mapdefs/demo2def.yaml'\nimport GameMap from 'components/GameMap'\nimport ThemeProvider from '@material-ui/styles/ThemeProvider'\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme'\nimport partialTheme from 'theme'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\n\nconst theme = createMuiTheme(partialTheme)\n\nfunction App() {\n  return (\n    <HashRouter basename={process.env.PUBLIC_URL}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline>\n          <div className=\"App\">\n            <Switch>\n              <Route path=\"/demo1\">\n                <GameMap mapDef={map1Def} />\n              </Route>\n              <Route path=\"/demo2\">\n                <GameMap mapDef={map2Def} />\n              </Route>\n\n              <Route>\n                <GameMap mapDef={map1Def} />\n              </Route>\n            </Switch>\n          </div>\n        </CssBaseline>\n      </ThemeProvider>\n    </HashRouter>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = {\"gridCount\":{\"width\":36,\"height\":24},\"gridSize\":{\"width\":70,\"height\":70},\"layerOrder\":[\"imagelayer1\",\"objectlayer1\"],\"layerDefs\":{\"imagelayer1\":{\"type\":\"image\",\"src\":\"/assets/map.png\"},\"objectlayer1\":{\"type\":\"object\",\"walkable\":[[0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,0,0,0,0,0,0,0],[0,0,0,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,0,0,0,0,0],[8,8,8,8,0,0,8,8,0,0,0,8,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,0,0,0,0],[0,8,8,8,8,0,0,8,0,0,8,8,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,8,8,8,8,8,8,0,0,0],[0,8,8,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,8,8,8,8,8,8,0,0],[0,8,8,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,8,8,8,0,0,0,0,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,8,8,8,0,0,8,0,0,0,0,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,8,8,8,0,0,8,8,8,8,0,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,8,8,8,0,0,0,8,8,8,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,8,8,8,0,0,0,0,0,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,8,0,0,0,0,8,8,8,8,8,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,8,0,0,0,8,8,8,8,8,8,8,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,8,8,8,8,8,8,8,0,0,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,8,0,0,0,8,8,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,0,8,8,8,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,8,8,8,0,8,8,8,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,8,8,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],[0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]]}},\"objectDefs\":{\"hero1\":{\"sprite\":\"hero1\",\"layer\":\"objectlayer1\",\"group\":1,\"position\":{\"x\":2,\"y\":12},\"stat\":{\"movementRange\":4}},\"hero2\":{\"sprite\":\"hero1\",\"layer\":\"objectlayer1\",\"group\":1,\"position\":{\"x\":6,\"y\":4},\"stat\":{\"movementRange\":15}}},\"spriteDefs\":{\"hero1\":{\"type\":\"image\",\"src\":\"/assets/demo2/hero1.png\"}}}"],"sourceRoot":""}